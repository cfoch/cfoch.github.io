---
layout: post
section-type: post
title: Installing NixOS (UEFI)
date: '2015-04-01T01:24:53-05:00'
tags:
- nixos
- haskell
- install nixos
tumblr_url: http://cfoch-dev.tumblr.com/post/115188220047/installing-nixos-uefi
---
<p>NixOS has been a really good adventure. I have to say that it was not that hard as I thought it would be. It is not really easy to install, but it seems before it was harder. This tutorial pretends to detail my experience installing NixOS.</p><p><b>1. </b>Download NixOS (Graphical installation LiveCD if you want to do things fast)</p><p><a href="http://nixos.org/nixos/download.html">http://nixos.org/nixos/download.html</a><br/></p><p><b>2. </b>Copy NixOS to a CD or USB.</p><p><b>3. </b>Restart your computer and load from your CD/DVD(blue-ray) drive or from your USB stick.</p><p><b>4. </b>You will see a menu. Select the UEFI option. After that NixOS will have load without in a text-based mode. You need to follow the instructions.</p><p><b>login: </b>root<br/><b>pass: </b></p><p>The password is nothing, so it means you just press enter. After that type</p><blockquote>start display-manager</blockquote><p>KDE desktop environment will load.</p><p><b>5. </b>Open GParted. <i>Remember that with UEFI you can have more than 4 primary partitions (I’ve heard you can have even 100 partitions). </i>Now you need these partitions: an EXT4 parition (let’s imagine it is /dev/sda10) and a FAT32 partition (with EF00 code) if you don’t have already one (let’s imagine it is located at /dev/sda2). You can alternatively create a SWAP partition. </p><p><b>6. </b>Remember we are following the case of /dev/sda10 as our target partition to install NixOS. </p><p>Open the konsole</p><blockquote>mkfs.ext4 -L nixos /dev/sda10</blockquote><blockquote>mount /dev/sda10 /mnt</blockquote><blockquote>mount /dev/sda /mnt/boot<br/></blockquote><blockquote>nixos-generate-config &ndash;root /mnt</blockquote><p><b>7. </b>What I like of NixOS is that you can say NixOS what to do from a text file. You are free of installing a desktop environment or not. Now we are going to tell NixOS to install KDE and enbale the X server. We want a graphical environment.</p><blockquote>nano /etc/nixos/configuration.nix</blockquote><p>I’m not a KDE fan, but I always prefer to have the desktop environment which the distribution supports better. I do not know if this is true, but NixOS Live CD has KDE4 as the default desktop, so it makes me think that it would be better to install KDE. You may want to install Firefox, Chromium or Haskell, too. So we will add these lines:</p><blockquote>environment.systemPackages = [<br/>  # KDE<br/>     pkgs.kde4.kdemultimedia pkgs.kde4.kdegraphics<br/>     pkgs.kde4.kdeutils<br/>     pkgs.kde4.applications pkgs.kde4.kdegames pkgs.kde4.kdeedu pkgs.kde4.kdebindings<br/>     pkgs.kde4.kdeaccessibility pkgs.kde4.kde_baseapps pkgs.kde4.kactivities<br/>     pkgs.kde4.kdeadmin pkgs.kde4.kdeartwork pkgs.kde4.kde_base_artwork<br/>     pkgs.kde4.kdenetwork pkgs.kde4.kdepim pkgs.kde4.kdepimlibs pkgs.kde4.kdeplasma_addons<br/>     pkgs.kde4.kdesdk pkgs.kde4.kdetoys pkgs.kde4.kde_wallpapers pkgs.kde4.kdewebdev<br/>     pkgs.kde4.oxygen_icons pkgs.kde4.kdebase_workspace pkgs.kde4.kdelibs<br/>     pkgs.kde4.kdevelop pkgs.kde4.kdevplatform<br/>  # Web-Browsers<br/>     pkgs.firefoxWrapper pkgs.chromium<br/>  # Haskell<br/>     pkgs.haskellPackages.ghc pkgs.haskellPackages.cabalInstall<br/>]</blockquote><p>As you can see these packages are added to this sort of list. If you don’t want to install something here just don’t add this item to the list. </p><p>To add graphical support you also will need to uncomment these lines:</p><blockquote>  # Enable the X11 windowing system.<br/>  services.xserver.enable = true;<br/>  services.xserver.layout = &ldquo;us&rdquo;;<br/>  services.xserver.xkbOptions = &ldquo;eurosign:e&rdquo;;<br/>  services.xserver.displayManager.kdm.enable = true;<br/>  services.xserver.desktopManager.kde4.enable = true;<br/>  # Enable the KDE Desktop Environment.</blockquote><p>You also may want to have connection to Internet. So you will uncomment this lines</p><blockquote>  # networking.hostName = &ldquo;nixos&rdquo;; # Define your hostname.<br/>  networking.hostId = &ldquo;15a17672&rdquo;;<br/>  networking.wireless.enable = true;  # Enables wireless.</blockquote><p><b>8. </b>Install NixOS</p><blockquote>nixos-install<br/></blockquote><p>You did it!</p><blockquote>reboot</blockquote><p><b>9. </b>Now create a new user</p><blockquote>useradd -c “Your Name” -m your_user_name<br/></blockquote><blockquote>passwd your_user_name</blockquote><p><b>10.</b> In order to connect to Internet via wi-fi you need to follow these instructions listed in the following link</p><p><b><a href="http://linuxcommando.blogspot.com/2013/10/how-to-connect-to-wpawpa2-wifi-network.html">http://linuxcommando.blogspot.com/2013/10/how-to-connect-to-wpawpa2-wifi-network.html</a><br/></b></p><p>That’s all, folks!</p>
